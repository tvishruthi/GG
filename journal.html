<!DOCTYPE html>
<html lang="en">
<!-- journal page-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G&G - Journal</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&family=Playfair+Display:wght@600&family=Kalam:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* Backgrounds */
        .bg-main {
            background: linear-gradient(-45deg, #0f172a, #1e1b4b, #1e293b, #0f172a);
            background-size: 300% 300%; position: fixed; inset: 0; z-index: -1;
        }
        .noise {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; opacity: 0.05;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Post Card Style Accha */
        .paper-note {
            box-shadow: 2px 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease; position: relative;
            /* Jagged paper effect */
            clip-path: polygon(0% 2%, 2% 0%, 5% 2%, 8% 0%, 10% 2%, 15% 0%, 20% 2%, 25% 0%, 30% 2%, 35% 0%, 40% 2%, 45% 0%, 50% 2%, 55% 0%, 60% 2%, 65% 0%, 70% 2%, 75% 0%, 80% 2%, 85% 0%, 90% 2%, 95% 0%, 100% 2%, 100% 100%, 0% 100%);
        }
        .paper-note:hover { transform: rotate(0deg) scale(1.02) !important; z-index: 10; }

        /* Buttons */
        .nav-tab { transition: all 0.2s; opacity: 0.8; }
        .nav-tab.on { opacity: 1; transform: scale(1.05); font-weight: bold; border: 2px solid white; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        
        /* Modal */
        .overlay {
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(8px);
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .overlay.show { opacity: 1; pointer-events: all; }

        /* Color circles */
        .dot { 
            width: 32px; height: 32px; border-radius: 50%; cursor: pointer; 
            border: 2px solid transparent; transition: transform 0.2s; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .dot:hover { transform: scale(1.1); }
        .dot.picked { 
            border-color: #334155; transform: scale(1.25); 
            box-shadow: 0 0 0 2px rgba(255,255,255,0.8); 
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'], serif: ['"Playfair Display"', 'serif'], hand: ['"Kalam"', 'cursive'] },
                extend: {
                    animation: { 'pop-up': 'fadeIn 0.3s ease-out forwards' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen text-slate-800 font-sans selection:bg-rose-200">

    <div class="bg-main"></div>
    <div class="noise"></div>

    <!-- Header -->
    <header class="fixed top-0 w-full p-4 md:p-6 flex justify-between items-center z-50 bg-slate-900/50 backdrop-blur-md border-b border-white/10">
        <a href="index.html" class="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition">
            <i data-lucide="arrow-left" class="w-5 h-5"></i>
        </a>
        
        <div class="flex flex-col leading-none text-center">
            <span class="font-serif font-bold text-xl text-white tracking-wide">Greatful</span>
            <span class="font-sans text-[10px] font-bold text-slate-300 uppercase tracking-[0.2em]">& Grounded</span>
        </div>

        <div onclick="window.location.href='index.html'" class="w-10 h-10 rounded-full bg-white/10 border border-white/20 flex items-center justify-center text-white shadow-lg group cursor-pointer hover:bg-white/20 transition">
            <i data-lucide="cat" class="w-5 h-5 group-hover:rotate-12 transition-transform duration-300"></i>
        </div>
    </header>

    <!-- Main Content -->
    <main class="relative pt-28 pb-20 px-4 max-w-xl mx-auto flex flex-col items-center gap-6">

        <!-- Top buttons -->
        <div class="flex flex-wrap justify-center gap-4 w-full">
            <button onclick="setFilter('my')" id="tab-my" class="nav-tab px-6 py-2 bg-pink-300 text-pink-900 rounded-full font-hand font-bold text-lg shadow-lg rotate-[-1deg]">
                Our Post (Me)
            </button>
            <button onclick="openModal()" class="nav-tab px-6 py-2 bg-blue-300 text-blue-900 rounded-full font-hand font-bold text-lg shadow-lg rotate-[1deg] hover:scale-110">
                + Spread Positivity
            </button>
        </div>

        <!-- Filter tabs -->
        <div class="flex gap-4 w-full">
            <button onclick="setFilter('social')" id="tab-social" class="nav-tab flex-1 py-3 bg-yellow-100 border-b-4 border-yellow-200 text-yellow-800 rounded-xl font-hand font-bold text-xl shadow-sm on">
                Social
            </button>
            <button onclick="setFilter('friends')" id="tab-friends" class="nav-tab flex-1 py-3 bg-cyan-100 border-b-4 border-cyan-200 text-cyan-800 rounded-xl font-hand font-bold text-xl shadow-sm">
                Friends
            </button>
        </div>

        <!-- Feed Area -->
        <div id="feed" class="w-full flex flex-col gap-6"></div>

    </main>

    <!-- Modal -->
    <div id="modal-overlay" class="overlay fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-lg shadow-2xl p-6 transform scale-95 transition-transform duration-300 relative overflow-hidden" id="modal-box">
            
            <div class="flex justify-between items-center mb-4">
                <h2 class="font-hand text-3xl font-bold text-slate-800">Customize Your Note üé®</h2>
                <button onclick="closeModal()" class="text-slate-400 hover:text-slate-600"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            
            <textarea id="note-text" rows="5" placeholder="Write something amazing..." 
                class="w-full p-5 rounded-sm border-none shadow-inner outline-none font-hand text-xl resize-none transition-colors duration-300"
                style="background-color: #fef9c3; color: #422006;"></textarea>

            <div class="mt-4 flex flex-col gap-2">
                <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Pick a Color</span>
                <div class="flex gap-3">
                    <div id="c1" onclick="setColor('#fef9c3', 'text-yellow-900', this)" class="dot bg-yellow-100 picked"></div>
                    <div id="c2" onclick="setColor('#dbeafe', 'text-blue-900', this)" class="dot bg-blue-100"></div>
                    <div id="c3" onclick="setColor('#fce7f3', 'text-pink-900', this)" class="dot bg-pink-100"></div>
                    <div id="c4" onclick="setColor('#dcfce7', 'text-green-900', this)" class="dot bg-green-100"></div>
                    <div id="c5" onclick="setColor('#f3e8ff', 'text-purple-900', this)" class="dot bg-purple-100"></div>
                    <div id="c6" onclick="setColor('#ffffff', 'text-slate-900', this)" class="dot bg-white border border-slate-200"></div>
                </div>
            </div>

            <div class="flex justify-end gap-3 mt-6">
                <button onclick="closeModal()" class="px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg">Cancel</button>
                <button onclick="addPost()" class="px-6 py-2 bg-slate-900 text-white font-bold rounded-lg hover:bg-slate-800 shadow-lg flex items-center gap-2">
                    Post It <i data-lucide="send" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Data
        let myBg = '#fef9c3';
        let myColor = 'text-yellow-900';
        let mode = 'social';
        
        const me = { name: "You", handle: "@me", av: "bg-purple-100 text-purple-600" };
        
        let db = [
            { id: 1, user: "Vish", time: "2 min ago", text: "Today I just sat in my garden and watched the clouds move. ‚òÅÔ∏è‚ú®", type: "friends", likes: 12, com: 2, av: "bg-slate-200 text-slate-600", bg: "#ffffff", tc: "text-slate-800" },
            { id: 2, user: "Archit", time: "1 hour ago", text: "Same", type: "friends", likes: 5, com: 0, big: true, av: "bg-blue-100 text-blue-600", bg: "#dbeafe", tc: "text-blue-900" },
            { id: 3, user: "Stranger", time: "3 hours ago", text: "Found a lost puppy today! üê∂‚ù§Ô∏è", type: "social", likes: 45, com: 8, av: "bg-green-100 text-green-600", bg: "#dcfce7", tc: "text-green-900" }
        ];

        // Draw Feed
        function load() {
            const box = document.getElementById('feed');
            box.innerHTML = "";

            let list = [];
            if (mode === 'social') list = db;
            else if (mode === 'friends') list = db.filter(x => x.type === 'friends' || x.type === 'my');
            else if (mode === 'my') list = db.filter(x => x.type === 'my');

            // Tabs UI
            document.querySelectorAll('.nav-tab').forEach(b => b.classList.remove('on'));
            if(mode === 'my') document.getElementById('tab-my').classList.add('on');
            else if(mode === 'friends') document.getElementById('tab-friends').classList.add('on');
            else document.getElementById('tab-social').classList.add('on');

            if(list.length === 0) {
                box.innerHTML = `<div class='text-white/50 text-center mt-10 font-hand text-xl'>No posts here yet... üçÇ</div>`;
                return;
            }

            list.forEach(p => {
                const bigText = p.big ? 'text-5xl text-center py-6' : 'text-xl';
                const rot = Math.random() * 3 - 1.5; 

                // template
                const html = `
                    <div class="paper-note w-full p-6 rounded-sm animate-pop-up" style="transform: rotate(${rot}deg); background-color: ${p.bg};">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full ${p.av} flex items-center justify-center font-bold text-sm bg-white/50">${p.user[0]}</div>
                                <div>
                                    <h3 class="font-bold text-lg leading-none ${p.tc}">${p.user}</h3>
                                    <span class="text-xs opacity-60 ${p.tc}">${p.time}</span>
                                </div>
                            </div>
                            <i data-lucide="more-horizontal" class="opacity-40 w-5 h-5 cursor-pointer hover:opacity-100"></i>
                        </div>
                        <div class="mb-4">
                            <p class="font-hand mt-2 leading-relaxed ${bigText} ${p.tc}">
                                ${p.text}
                            </p>
                        </div>
                        <div class="flex justify-between items-center pt-3 border-t border-black/5">
                            <div class="flex gap-6 opacity-60 ${p.tc}">
                                <button onclick="like(${p.id})" class="flex items-center gap-1 hover:opacity-100 transition group">
                                    <i data-lucide="heart" class="w-5 h-5 group-hover:scale-110 transition ${p.liked ? 'fill-red-500 text-red-500' : ''}"></i>
                                    <span class="text-sm font-bold">${p.likes}</span>
                                </button>
                                <button class="flex items-center gap-1 hover:opacity-100 transition group">
                                    <i data-lucide="message-circle" class="w-5 h-5 group-hover:scale-110 transition"></i>
                                    <span class="text-sm font-bold">${p.com}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                box.innerHTML += html;
            });
            lucide.createIcons();
        }

        function setFilter(t) { 
            mode = t; 
            load(); 
        }

        function like(id) {
            const p = db.find(x => x.id === id);
            if (p.liked) { p.likes--; p.liked = false; } 
            else { p.likes++; p.liked = true; }
            load();
        }

        // Color Picker
        function setColor(bg, txt, el) {
            myBg = bg;
            myColor = txt;
            
            const area = document.getElementById('note-text');
            area.style.backgroundColor = bg;
            
            // simple contrast check
            if(txt.includes('slate')) area.style.color = '#1e293b';
            else if(txt.includes('yellow')) area.style.color = '#422006';
            else if(txt.includes('blue')) area.style.color = '#1e3a8a';
            else if(txt.includes('pink')) area.style.color = '#831843';
            else if(txt.includes('green')) area.style.color = '#14532d';
            else if(txt.includes('purple')) area.style.color = '#581c87';

            // UI update
            document.querySelectorAll('.dot').forEach(d => d.classList.remove('picked'));
            el.classList.add('picked');
        }

        function openModal() {
            document.getElementById('modal-overlay').classList.add('show');
            document.getElementById('modal-box').style.transform = 'scale(1)';
            // reset
            setColor('#fef9c3', 'text-yellow-900', document.getElementById('c1'));
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('show');
            document.getElementById('modal-box').style.transform = 'scale(0.95)';
        }

        function addPost() {
            const val = document.getElementById('note-text').value;
            if (val == "") {
                alert("Write something first!");
                return;
            }

            const item = {
                id: Date.now(),
                user: me.name,
                time: "Just now",
                text: val,
                type: "my",
                likes: 0,
                com: 0,
                av: me.av,
                bg: myBg,
                tc: myColor
            };

            db.unshift(item); // add to top
            closeModal();
            document.getElementById('note-text').value = "";
            setFilter('my');
        }

        // Init
        load();

    </script>
</body>
</html>
